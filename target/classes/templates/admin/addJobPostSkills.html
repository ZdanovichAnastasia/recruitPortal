<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymleafe.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RecruitPortal</title>
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/showAll.css">
    <link rel="stylesheet" type="text/css" href="/css/input.css">
    <link rel="stylesheet" type="text/css" href="/css/viewport.css">
    <script src="/js/headers.js"></script>
    <script src="/js/filter.js"></script>
</head>

<body>
<script>setHeader("администратор");</script>
<div class="container">
    <form  th:action="@{/logout}" method="post">
        <div class="login">
            <button style="position: fixed; margin-left: 450px;  z-index: 30;" class="btn_auto">Выйти</button>
        </div>
    </form>
</div>

<div class="content">
    <div class="input-window">
        <div class="personal_info" th:if="${!jobPostInfo.skills.isEmpty() && jobPostInfo.skills != null}">
            <div class="values" th:each="skill : ${jobPostInfo.skills}">
                <p th:text="${skill.skillSet.skillSetName}"></p>
                <div class="cont">
                    <div class="skills name" th:style="'width: '+${skill.skillLevel}+'%; background-color: #21C2F8;'" th:text="${skill.skillLevel}+'%'"></div>
                </div>
                <form method="post" th:action="@{/deleteJobPostSkill}">
                    <button name = "id" th:value="${skill.id}" class="del-profile">Удалить навык</button>
                </form>
            </div>
        </div>
        <div class="st">
                <button onclick="openForm()">Добавить навык</button>
                <div class="form" id="myForm">
                    <div class="form-popup" >
                        <form method="post" th:action="@{/addSkill/{id}(id=${jobPostInfo.getId()})}" th:object="${post}">
                            <input type="text" th:field="*{skills[0].skillSet.skillSetName}" placeholder="Навык"><br/>
                            <p style="color:red; font-size: 14px;" th:if="${#fields.hasErrors('skills[0].skillSet.skillSetName')}" th:errors="*{skills[0].skillSet.skillSetName}">error</p>

                            <input type="text" th:field="*{skills[0].skillLevel}" placeholder="Уровень"><br/>
                            <p style="color:red; font-size: 14px;" th:if="${#fields.hasErrors('skills[0].skillLevel')}" th:errors="*{skills[0].skillLevel}">error</p>
                            <button style="margin-left: -20px" class="close">Сохранить</button>
                        </form>
                        <button style="margin-left: -20px" class="close" onclick="closeForm()">Отмена</button>
                    </div>
                </div>

                <script>
                    function openForm() {
                        document.getElementById("myForm").style.display = "block";
                    }

                    function closeForm() {
                        document.getElementById("myForm").style.display = "none";
                    }
                </script>
            </div>
        <a th:href="'/showJobPost?idJobPost='+${jobPostInfo.id}">Добавить</a>
    </div>
</div>

</div>
</body>
</html>